{% extends "blog/base.html" %}
{% block content %}

<!-- ================= USER SEARCH ================= -->
<form method="get" action="{% url 'users' %}"
      style="margin-bottom:40px; text-align:center;">
    <input
        type="text"
        name="q"
        value="{{ query }}"
        placeholder="Search usersâ€¦"
        style="
            padding:10px 14px;
            width:260px;
            border-radius:999px;
            border:1px solid #ddd;
            font-size:14px;
        ">
</form>

<!-- ================= USER GRID ================= -->
<div class="feed"
     style="
        display:grid;
        grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
        gap:20px;
     ">

{% for profile in profiles %}
    <a href="{% url 'user_profile' profile.user.username %}"
       class="post-card"
       style="
            text-decoration:none;
            color:inherit;
            text-align:center;
            padding:24px;
       ">

        {% if profile.avatar %}
            <img src="{{ profile.avatar.url }}"
                 style="
                    width:70px;
                    height:70px;
                    border-radius:50%;
                    object-fit:cover;
                 ">
        {% else %}
            <div style="
                width:70px;
                height:70px;
                border-radius:50%;
                background:#E6E2DC;
                display:flex;
                align-items:center;
                justify-content:center;
                font-weight:600;
                font-size:22px;
                color:#6E6A66;
                margin:0 auto;
            ">
                {{ profile.user.username|first|upper }}
            </div>
        {% endif %}

        <h3 style="margin-top:12px;">
            {{ profile.user.first_name|default:profile.user.username }}
        </h3>

        <p style="font-size:13px; color:#6E6A66;">
            {{ profile.bio|default:"No bio yet."|truncatechars:80 }}
        </p>

    </a>
{% empty %}
    <p style="text-align:center; color:#6E6A66;">
        No users found.
    </p>
{% endfor %}

</div>

{% endblock %}
