{% extends 'blog/base.html' %}

{% block content %}

<div class="hero">
    <div class="hero-title">
        Unprompted<span class="accent">.</span>
    </div>

    <div class="hero-line">Without prompts<span class="accent">.</span></div>
    <div class="hero-line">A human-only writing space<span class="accent">.</span></div>
    <div class="hero-line">No AI assistance<span class="accent">.</span></div>
    <div class="hero-line">No automation<span class="accent">.</span></div>
    <div class="hero-line">Just people sharing real thoughts<span class="accent">.</span></div>
</div>

<div class="feed">

    {% if user.is_authenticated %}
        <div class="post-card">
            <form method="post" action="{% url 'create_post' %}">
                {% csrf_token %}
                <textarea
                    name="content"
                    rows="4"
                    placeholder="Write something human..."
                    style="width:100%; border:none; resize:none; font-family:inherit; font-size:15px;"
                    required></textarea>

                <button type="submit"
                        style="margin-top:10px; background:#C65D3B; color:white; border:none; padding:8px 16px; border-radius:999px;">
                    Post
                </button>
            </form>
        </div>
    {% else %}
        <p style="text-align:center; color:#6E6A66;">
            Log in to write something human.
        </p>
    {% endif %}

    {% for post in posts %}
        <div class="post-card">

            <a href="{% url 'post_detail' post.id %}"
               style="text-decoration:none; color:inherit; display:block;">

                <div class="author">
                    <a href="{% url 'user_profile' post.author.username %}"
                        style="text-decoration:none; color:inherit;">
                        {{ post.author.username }}
                     </a>
                </div>

                {% if post.author.profile.bio %}
                    <div class="meta">{{ post.author.profile.bio }}</div>
                {% endif %}

                <div class="content">
                    {{ post.content|linebreaks|truncatechars:300 }}
                </div>

                <div class="meta">
                    {{ post.created_at|date:"M d, Y Â· H:i" }}
                </div>

            </a>

        </div>
    {% empty %}
        <p style="text-align:center; color:#6E6A66;">
            No posts yet. Be the first to write something human.
        </p>
    {% endfor %}

</div>

{% endblock %}
